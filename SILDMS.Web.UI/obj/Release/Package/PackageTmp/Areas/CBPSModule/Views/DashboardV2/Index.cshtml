@{
    Layout = "~/Views/Shared/_AdminLteLayout.cshtml";
}
<style>
    .link_total_bm {
        color:black;
        font-weight: bold;
    }
    .link_total_bm :hover {
        color:#0091EA !important;
        font-weight: bold;
    }

    .link_within_bm {
        color:green;
        font-weight: bold;
    }
    .link_within_bm :hover {
        color:#0091EA;
        font-weight: bold;
    }
    .link_out_bm {
        color:firebrick;
        font-weight: bold;
    }
    .link_out_bm :hover {
        color:#0091EA;
        font-weight: bold;
    }
    .global-search {
         height: 34px;
    }
    .btn-round{
        border-radius: 17px;
    }
	.box.box-solid.box-primary > .box-header {
		text-align: center;
	}
       
</style>
@*background: rgba(0, 0, 0, 0.1);  background: rgba(0, 0, 0, 0.15);*@
<div class="box box-primary box-body" ng-controller="DashboardV2Ctrl">
   
    <!--<div class="row">
        <div class="col-md-4">

			<div class="box box-primary box-solid">
				<div class="box-header with-border" style="padding-top:5px;padding-bottom:5px">
					<h3 class="box-title text-center">Bill Parking Status</h3>				
				</div>

				<div class="box-body">
					<div class="row">
						<div class="col-sm-4 border-right">
							<div class="description-block">
								<h5 class="description-header">{{parkingResult.TotalPendingParking}}</h5>
								<span><b>Total</b></span>
							</div>
						</div>
						<a href="/CBPSModule/BillReceiveForParkingV2?page=Within" class="link_within_bm">
							<div class="col-sm-4 border-right">
								<div class="description-block">
									<h5 class="description-header">{{parkingResult.WithinBenchMark}}</h5>
									<span>In-Time</span>
								</div>
							</div>
						</a>
						<a href="/CBPSModule/BillReceiveForParkingV2?page=Over" class="link_out_bm">
							<div class="col-sm-4">
								<div class="description-block">
									<h5 class="description-header">{{parkingResult.OverBenchmark}}</h5>
									<span>Delay</span>
								</div>
							</div>
						</a>
					</div>
				</div><!-- /.box-body -->
			<!--</div>
        </div>
        <div class="col-md-4">


			<div class="box box-primary box-solid">
				<div class="box-header with-border" style="padding-top:5px;padding-bottom:5px">
					<h3 class="box-title text-center">Bill Posting Status</h3>
					
				</div>--><!-- /.box-header -->
				<!--<div class="box-body">
					<div class="row">
						<div class="col-sm-4 border-right">
							<div class="description-block">
								<h5 class="description-header">{{postingResult.TotalPendingParking}}</h5>
								<span><b>Total</b></span>
							</div>
						</div>
						<a href="/CBPSModule/BillReceiveForPostingV2?page=Within" class="link_within_bm">
							<div class="col-sm-4 border-right">
								<div class="description-block">
									<h5 class="description-header">{{postingResult.WithinBenchMark}}</h5>
									<span>In-Time</span>
								</div>
							</div>
						</a>
						<a href="/CBPSModule/BillReceiveForPostingV2?page=Over" class="link_out_bm">
							<div class="col-sm-4">
								<div class="description-block">
									<h5 class="description-header">{{postingResult.OverBenchmark}}</h5>
									<span>Delay</span>
								</div>
							</div>
						</a>
					</div>
				</div>--><!-- /.box-body -->
			<!--</div>
           
        </div>
        <div class="col-md-4">
			<div class="box box-primary box-solid">
				<div class="box-header with-border" style="padding-top:5px;padding-bottom:5px">
					<h3 class="box-title text-center">Bill Clearing Status</h3>					
				</div>
				<div class="box-body">
					<div class="row">
                        <a href="/CBPSModule/BillReceiveForClearingV2" class="link_total_bm">
                            <div class="col-sm-4 border-right">
                                <div class="description-block">
                                    <h5 class="description-header">{{clearingResult.TotalPendingParking}}</h5>
                                    <span><b>Total</b></span>
                                </div>
                            </div>
                        </a>


						<div class="col-sm-4 border-right">
							<div class="description-block" style="color: green">
								<h5 class="description-header" >{{clearingResult.WithinBenchMark}}</h5>
								<span><b>In-Time</b></span>
							</div>
						</div>
					

						<div class="col-sm-4">
							<div class="description-block" style="color: firebrick">
								<h5 class="description-header" >{{clearingResult.OverBenchmark}}</h5>
								<span><b>Delay</b></span>
							</div>
						</div>
						
					</div>
				</div>--><!-- /.box-body -->
			<!--</div>   
        </div>
    </div>

    <div ng-if="isSupervisor">

        <div class="row">
            <div class="col-sm-4">

                <div class="box box-primary box-solid">
                    <div class="box-header with-border" style="padding-top:5px;padding-bottom:5px">
                        <h3 class="box-title text-center">Unassigned Parking</h3>
                    </div>--><!-- /.box-header -->
                    <!--<div class="box-body" style="padding:0px;margin:0px">
                        <div class="row" >
                            <div class="col-sm-4">
                                <a href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=All" class="link_total_bm">
                                    <div class="border-right">
                                        <div class="description-block">
                                            <h5 class="description-header">{{pendingResult.ParkingCount}}</h5>
                                            <span><b>Total</b></span>
                                        </div>
                                    </div>
                                </a>
                            </div>

                            <div class="col-sm-8">
                                <div class="description-block" style="color: firebrick;padding-right: 10px;">-->
                                    @*<a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=101">SCM- Import</a> | 
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=201">SCM- Domestic</a> |
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=301">TSD- Eng.</a> |
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=401">TSD- Pharmacy</a> |
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=501">PBN- Pur.</a> |
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=601">DHU- Pur.</a> |
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=701">STO- Others</a>*@


                                    @*<select name="purchaseGroup" class="form-control" ng-model="selectedPurchaseGroup" ng-change="GetBillBypurchaseGroup(selectedPurchaseGroup)"
                                            data-ng-options="purchase.UDDocCategoryCode as purchase.DocCategoryName for purchase in purchaseList | filter:hideAll" ng-disabled="loading" required style="height: 30px; font-size: smaller">
                                        <option value="">-- Select a purchasing group --</option>
                                    </select>

                                </div>
                            </div>

                        </div>
                    </div>*@
                <!--</div>   
            </div>
            <div class="col-sm-4">
                <div class="box box-primary box-solid">
                    <div class="box-header with-border" style="padding-top:5px;padding-bottom:5px">
                        <h3 class="box-title text-center">Unassigned Posting</h3>
                    </div>--><!-- /.box-header -->
                    <!--<div class="box-body" style="padding:0px;margin:0px">
                        <div class="row">
                            <div class="col-sm-4">
                                <a href="/CBPSModule/BillPostingAssmnt?BoothID=All&Type=0&VP=0" class="link_total_bm">
                                    <div class="border-right">
                                        <div class="description-block">
                                            <h5 class="description-header">{{pendingResult.PostingCount}}</h5>
                                            <span><b>Total</b></span>
                                        </div>
                                    </div>
                                </a>
                            </div>


                            <div class="col-sm-8">
                                <div class="description-block" style="color: firebrick; margin-top:0px;margin-bottom:0px">
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillPostingAssmnt?BoothID=All&Type=0&VP=1">Cash</a> <br/>
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillPostingAssmnt?BoothID=All&Type=0&VP=2">Non-Cash</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>  
            </div>
            <div class="col-sm-4">
                <div class="box box-primary box-solid">
                    <div class="box-header with-border" style="padding-top:5px;padding-bottom:5px">
                        <h3 class="box-title text-center">Unassigned Clearing</h3>
                    </div>--><!-- /.box-header -->
                    <!--<div class="box-body" style="padding:0px;margin:0px">
                        <div class="row">
                            <div class="col-sm-4">
                                <a href="/CBPSModule/BillClearingAssmnt?BoothID=All&Type=0&VP=0" class="link_total_bm">
                                    <div class="border-right">
                                        <div class="description-block">
                                            <h5 class="description-header">{{pendingResult.ClearingCount}}</h5>
                                            <span><b>Total</b></span>
                                        </div>
                                    </div>
                                </a>
                            </div>


                            <div class="col-sm-8">
                                <div class="description-block" style="color: firebrick; margin-left:0px;margin-top:0px;margin-bottom:0px">
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillClearingAssmnt?BoothID=All&Type=0&VP=1">EFT</a> <br />
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillClearingAssmnt?BoothID=All&Type=0&VP=2">Non-EFT</a> <br/>
                                    <a class="link_within_bm" style="white-space: nowrap" href="/CBPSModule/BillClearingAssmnt?BoothID=All&Type=0&VP=3">Cash</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div> 
            </div>
        </div>


        <div class="box-header with-border">
            <i class="fa fa-list-alt"></i>
            <h3 class="box-title">Bill Processing Status</h3>
            <div class="box-tools pull-right">
                <div class="input-group" style="width:250px">
                    <input type="text" class="form-control global-search" ng-model="pagingInfo.search" ng-change="emptyCheck()" placeholder="Global Search..">
                    <span class="input-group-btn">
                        <button class="btn btn-default" ng-click="search()" type="button"><i class="fa fa-search"></i></button>
                    </span>
                </div>
            </div>
        </div>
        <div class="box-body">
            <div class="row table-responsive">
                <table class="table table-condensed table-bordered table-striped table-hover" style="margin-bottom:0px; font-size:smaller">
                    <thead>
                        <tr>
                            <th rowspan="2" ng-click="sort('EmployeeName')" style="vertical-align:middle">
                                Emp. Name
                                <span ng-show="pagingInfo.sortBy == 'EmployeeName' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'EmployeeName' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </th>
                            <th rowspan="2" ng-click="sort('Company')" style="vertical-align:middle">
                                User Level
                                <span ng-show="pagingInfo.sortBy == 'Company' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'Company' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </th>
                            <th colspan="3">Parking</th>
                            <th colspan="3">Posting</th>
                            <th colspan="3">Clearing</th>
                        </tr>
                        <tr>
                            <td ng-click="sort('WaitingforParking')" style="background: #455A64; color: white;" class="text-center">
                                Total
                                <span ng-show="pagingInfo.sortBy == 'WaitingforParking' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'WaitingforParking' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('Company')" style="background: #455A64; color: white;" class="text-center">
                                In-Time
                                <span ng-show="pagingInfo.sortBy == 'ParkingWithinBenchMark' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'ParkingWithinBenchMark' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('Vendor')" style="background: #455A64; color: white;" class="text-center">
                                Delay
                                <span ng-show="pagingInfo.sortBy == 'ParkingOverBenchMark' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'ParkingOverBenchMark' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('WaitingforParking')" style="background: #455A64; color: white;" class="text-center">
                                Total
                                <span ng-show="pagingInfo.sortBy == 'WaitingforPosting' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'WaitingforPosting' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('Company')" style="background: #455A64; color: white;" class="text-center">
                                In-Time
                                <span ng-show="pagingInfo.sortBy == 'PostingWithinBenchMark' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'PostingWithinBenchMark' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('Vendor')" style="background: #455A64; color: white;" class="text-center">
                                Delay
                                <span ng-show="pagingInfo.sortBy == 'PostingOverBenchMark' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'PostingOverBenchMark' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('WaitingforParking')" style="background: #455A64; color: white;" class="text-center">
                                Total
                                <span ng-show="pagingInfo.sortBy == 'WaitingforClearing' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'WaitingforClearing' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('Company')" style="background: #455A64; color: white;" class="text-center">
                                In-Time
                                <span ng-show="pagingInfo.sortBy == 'ClearingWithinBenchMark' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'ClearingWithinBenchMark' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                            <td ng-click="sort('Vendor')" style="background: #455A64; color: white;" class="text-center">
                                Delay
                                <span ng-show="pagingInfo.sortBy == 'ClearingOverBenchMark' && !pagingInfo.reverse" class="fa fa-caret-down"></span>
                                <span ng-show="pagingInfo.sortBy == 'ClearingOverBenchMark' && pagingInfo.reverse" class="fa fa-caret-up"></span>
                            </td>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="item in supervisorAsgnment">
                            <td class="hide">{{item.EmployeeID}}</td>
                            <td>{{item.EmployeeID+'-'+item.UserName}}</td>
                            <td> {{item.CompanyCode+'-'+item.CompanyName}}</td>
                            <td class="text-center">{{item.TotalPendingParking}}</td>
                            <td class="text-center"><a href="/CBPSModule/BillParkingAssmnt?page=Within&userid={{item.UserID}}">{{item.WithinBenchMarkParking}}</a></td>
                            <td class="text-center"><a href="/CBPSModule/BillParkingAssmnt?page=Over&userid={{item.UserID}}">{{item.OverBenchmarkParking}}</a></td>
                            <td class="text-center">{{item.TotalPendingPosting}}</td>
                            <td class="text-center"><a href="/CBPSModule/BillPostingAssmnt?page=Within&userid={{item.UserID}}">{{item.WithinBenchMarkPosting}}</a></td>
                            <td class="text-center"><a href="/CBPSModule/BillPostingAssmnt?page=Over&userid={{item.UserID}}">{{item.OverBenchmarkPosting}}</a></td>
                            <td class="text-center">{{item.TotalPendingClearing}}</td>
                            <td class="text-center"><a href="/CBPSModule/BillClearingAssmnt?page=Within&userid={{item.UserID}}">{{item.WithinBenchMarkClearing}}</a></td>
                            <td class="text-center"><a href="/CBPSModule/BillClearingAssmnt?page=Over&userid={{item.UserID}}">{{item.OverBenchmarkClearing}}</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
    </div>

    <div id="mydiv" data-ng-show="ParkingLoading || PostingLoading || ClearingLoading || countLoading || tableLoading">
        <div class="overlay">
            <div class="loder">
                <img src="~/Content/AdminLTE/img/cube.gif" /> <span class="text-bold">Loading...</span>
            </div>
        </div>
    </div>-->
 
</div>
<script type="text/javascript">
    app.controller('DashboardV2Ctrl', ['$scope', '$http', function ($scope, $http) {
        ////Start Region for personal data Declaration
        //$scope.parkingResult = {};
        //$scope.postingResult = {};
        //$scope.clearingResult = {};
        //$scope.isSupervisor = false;
        //$scope.assignmentDivShowHide = false;

        //var LoadParkingData = function () {
        //    $scope.ParkingLoading = true;
        //    $http.get('/CBPSModule/DashboardV2/GetParkingResult')
        //        .then(
        //        function (response) {
        //            $scope.parkingResult = response.data;
        //            $scope.ParkingLoading = false;
        //        },
        //        function () {
        //            $scope.ParkingLoading = false;
        //        });
        //}

        //var LoadPostingData = function () {
        //    $scope.PostingLoading = true;
        //    $http.get('/CBPSModule/DashboardV2/GetPostingResult')
        //        .then(
        //        function (response) {
        //            $scope.postingResult = response.data;
        //            $scope.PostingLoading = false;
        //        },
        //        function () {
        //            $scope.PostingLoading = false;
        //        });
        //}

        //var LoadClearingData = function () {
        //    $scope.ClearingLoading = true;
        //    $http.get('/CBPSModule/DashboardV2/GetClearingResult')
        //        .then(
        //        function (response) {
        //            $scope.clearingResult = response.data;
        //            $scope.ClearingLoading = false;
        //        },
        //        function () {
        //            $scope.ClearingLoading = false;
        //        });
        //}
        ////End Region for personal data Declaration




        ////Start Region for Supervisor Data-----------
        //$scope.supervisorAsgnment = {};

        //var LoadSuperDataAsgn = function () {
        //    $scope.tableLoading = true;
        //    $http.get('/CBPSModule/DashboardV2/GetParkingResultAsgn')
        //        .then(
        //        function (response) {
        //            $scope.supervisorAsgnment = response.data;
        //            $scope.tableLoading = false;
        //        },
        //        function () {
        //            $scope.tableLoading = false;
        //        });
        //};

        ////End Region for Supervisor Data -------------



        //LoadParkingData();
        //LoadPostingData();
        //LoadClearingData();

        //$scope.pendingResult = {};

        //var GetPendingBillCount = function () {
        //    $scope.countLoading = true;
        //    $http.get('/CBPSModule/DashboardV2/GetPendingBillCount')
        //        .then(
        //            function (response) {
        //                $scope.pendingResult = response.data;
        //                $scope.countLoading = false;
        //            },
        //            function () {
        //                $scope.countLoading = false;
        //            });
        //};



       
        //var ShowAllocation = function () {
        //    $http.get('/CBPSModule/DashboardV2/IsASuperVisor')
        //    .then(
        //    function (response) {
        //        if (response.data)
        //        {
        //            $scope.isSupervisor = true;
        //            GetPendingBillCount();
        //            LoadSuperDataAsgn();
        //        }
        //    },
        //    function () {

        //    });    
        //};

        //ShowAllocation();


        //function PurchaseGroup() {
        //    $http.get("/CBPSModule/BillParkingAssmnt/GetPurchaseGroup")
        //       .success(function (response) {
        //           $scope.purchaseList = response.purchaseGroup;
        //       })
        //       .error(function () {
        //       });
        //}

        //PurchaseGroup();

        //$scope.GetBillBypurchaseGroup = function (val) {
        //    if (val == "") {
        //        return;
        //    }
        //    window.location = '/CBPSModule/BillParkingAssmnt?BoothID=All&Type=0&PG=' + val;
        //};

        //$scope.hideAll = function (list) {
        //    return list.UDDocCategoryCode != 'All';
        //};
    }]);
</script>

